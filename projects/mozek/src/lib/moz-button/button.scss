@use "styles" as moz;

:host {
    --moz-btn-border-size: 0.1rem;
    
    display: inline-block;
}


/* --------------------------
   Button Base Styles
-------------------------- */
button.moz-btn {
    @include moz.root-button();
    position: relative;
    width: 100%; height: fit-content;
    min-width: 7.5rem; min-height: 2.5rem;
    padding: var(--moz-space-1) var(--moz-space-2);
    border-radius: var(--moz-radius-default);
    font-weight: var(--moz-font-weight-semibold);
    text-align: center;
    transition: all var(--moz-duration) var(--moz-ease);
    cursor: pointer;

    &:focus-visible {
        outline: solid 2px transparent;
        outline-offset: 2px;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, .35);
    }
    &:disabled {
        opacity: 0.3;
        filter: grayscale(1);
        pointer-events: none;
    }
}


/* ---------------------------
   Model Styles
--------------------------- */
/* Fill */
.moz-btn--fill {
    background: var(--moz-btn-bg, var(--moz-color-primary));
    color: white;
    border: none;
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) 60%, white);}
}

/* Outline */
.moz-btn--outline {
    background: transparent;
    color: var(--moz-btn-bg, var(--moz-color-primary));
    border: solid var(--moz-btn-border-size) color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) var(--moz-fade-border), white);
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary))  var(--moz-fade-hover), white);}
}

/* Tonal */
.moz-btn--tonal {
    background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) var(--moz-btn-line-contrast), white);
    color: var(--moz-btn-bg, var(--moz-color-primary));
    border: none;
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) 30%, white);}
}

/* Flavor */
.moz-btn--flavor {
    background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) var(--moz-btn-line-contrast), white);
    color: var(--moz-color-text);
    border: solid var(--moz-btn-border-size) color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary))  var(--moz-fade-border), white);
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary)) 20%, white);}
}

/* Elevated */
.moz-btn--elevated {
    background: var(--moz-color-elevated);
    color: var(--moz-btn-bg, var(--moz-color-primary));
    border: none;
    @include moz.root-shadow(1);
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary))  var(--moz-fade-hover), white);}
    &:active:not(:disabled) { transform: translateY(1px); box-shadow: 0 0.5px 1px 0 rgba(60,64,67,.08);}
}

/* Glassmorphism */
.moz-btn--glass {
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur( 50px ); // frosted blur
    -webkit-backdrop-filter: blur( 50px ); // for Safari
    color: var(--moz-btn-bg, var(--moz-color-primary));
    border: solid var(--moz-btn-border-size) var(--moz-color-border-glassmorphism);
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary))  var(--moz-fade-hover), white);}
}

/* Text */
.moz-btn--text {
    background: transparent;
    color: var(--moz-btn-bg, var(--moz-color-primary));
    border: none;
    &:hover:not(:disabled) { background: color-mix(in srgb, var(--moz-btn-bg, var(--moz-color-primary))  var(--moz-fade-hover), white);}
}


/* ---------------------------
   Ripple Effect
--------------------------- */
.buttonRipple {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border-radius: inherit;
    overflow: hidden;
}
.ripple {
    position: absolute;
    border-radius: 50%;
    opacity: .3;
    transform: scale(0);
    pointer-events: none;
    z-index: 2;
    animation: ripple .6s linear forwards;
}
@keyframes ripple { to { transform: scale(4); opacity: 0;}}

@media (prefers-reduced-motion: reduce) {
    .ripple { animation-duration: 0.001s;}
    button.moz-button:active { transform: none;}
}